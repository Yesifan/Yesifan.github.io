(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,n){e.exports=n(56)},35:function(e,t,n){},36:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(13),r=n.n(i),c=(n(35),n(59)),s=n(60),l=n(61),u=n(58);function d(e){var t=e.getContext("2d"),n=1e4,a=e.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=e.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=function(e,t,n){for(var a=[],o=0;o<e;o++){var i=Math.random()*t,r=Math.random()*n,c=2*Math.random()-1,s=2*Math.random()-1,l=2+Math.round(2*Math.random());a[o]={x:i,y:r,xa:c,ya:s,radius:l}}return a}(10+a*o/1e4,a,o),r=[];e.addEventListener("mousemove",function(e){r=[{x:e.clientX,y:e.clientY}]},!1),e.addEventListener("touchmove",function(e){for(var t=e.changedTouches,n=[],a=0;a<t.length;a++)n.push({x:t[a].clientX,y:t[a].clientY});r=n},!1),window.onresize=function(){a=e.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=e.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},function e(){t.clearRect(0,0,a,o);t.fillStyle="rgba(255,255,255,.4)";i.forEach(function(e,c){function s(a){if(!a)return!1;var o=e.x-a.x,i=e.y-a.y,r=o*o+i*i;r<n&&(t.strokeStyle="rgba(255,255,255,".concat(.6*(1-r/n),")"),t.beginPath(),t.lineWidth=.5,t.moveTo(e.x,e.y),t.lineTo(a.x,a.y),t.stroke())}t.beginPath(),e.x+=e.xa,e.y+=e.ya,e.xa*=e.x>a||e.x<0?-1:1,e.ya*=e.y>o||e.y<0?-1:1,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!0),t.fill(),r.forEach(function(e){return s(e)}),i.forEach(function(e,t){if(t<=c)return!1;s(e)})});requestAnimationFrame(e)}()}var m=n(5),f=n(6),h=n(8),v=n(7),p=n(14),g=n(9),b=n(57),y=n(11),E=n.n(y),w=(n(36),function(e){var t=e.todo,n=e.onToggle,a=e.onDestroy,i=e.onEditor,r=e.onSubmit,c=e.editing;return o.a.createElement("li",{className:E()({completed:t.completed,"todo-item":!0})},o.a.createElement("div",{className:"view"},o.a.createElement("input",{className:"toggle",type:"checkbox",checked:t.completed,onChange:function(){return n(t.id)}}),o.a.createElement("label",{contentEditable:c,onKeyDown:function(e){13===e.which?r(t.id,e.target.innerHTML):27===e.which&&a(t.id)},onBlur:function(e){return r(t.id,e.target.innerHTML)},onDoubleClick:function(e){return i(t.id,e)},dangerouslySetInnerHTML:{__html:t.text}}),o.a.createElement("button",{className:"destroy",onClick:function(){return a(t.id)}})))}),j=n(26),k=n(12),O="y-todos",S=function(){function e(t){Object(m.a)(this,e),this.react=t,this._todos=JSON.parse(localStorage.getItem(O))||[]}return Object(f.a)(e,[{key:"init",value:function(){this.react.setState({todos:this._todos})}},{key:"update",value:function(){console.log(this._todos),localStorage.setItem(O,JSON.stringify(this._todos))}},{key:"addTodo",value:function(e){var t=this;this.react.setState(function(n){var a=k.a.fromJS(n.todos||[]).push({id:Object(j.v4)(),completed:!1,text:e});return t._todos=a.toJS(),{todos:t._todos}},function(){return t.update()})}},{key:"save",value:function(e,t){var n=this;if(!t)return this.delete(e);var a=k.a.fromJS(this._todos),o=a.findIndex(function(t){return t.getIn&&t.getIn(["id"])===e});this._todos=a.setIn([o,"text"],t).toJS(),this.react.setState({todos:this._todos},function(){return n.update()})}},{key:"delete",value:function(e){var t=this;this.react.setState(function(n){var a=k.a.fromJS(n.todos),o=a.findIndex(function(t){return t.getIn&&t.getIn(["id"])===e});return t._todos=a.delete(o).toJS(),{todos:t._todos}},function(){return t.update()})}},{key:"statusChange",value:function(e){var t=this;this.react.setState(function(n){var a=k.a.fromJS(n.todos),o=a.findIndex(function(t){return t.getIn&&t.getIn(["id"])===e});return t._todos=a.setIn([o,"completed"],!a.getIn([o,"completed"])).toJS(),{todos:t._todos}},function(){return t.update()})}}]),e}(),x=13,N=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).handleChange=function(e){n.setState({newTodo:e.target.value})},n.handleNewTodoKeyDown=function(e){if(e.keyCode===x){e.preventDefault();var t=n.state.newTodo.trim();t&&(n.model.addTodo(t),n.setState({newTodo:""}))}},n.itemToggle=function(e){return n.model.statusChange(e)},n.itemDestroy=function(e){return n.model.delete(e)},n.itemEdit=function(e,t){var a=t.target;n.setState({editor:e},function(){return a.focus()})},n.itemSubmit=function(e,t){n.model.save(e,t),n.setState({editor:!1})},n.state={newTodo:"",editor:!1,todos:[{id:"asdf",completed:!1,text:"text"}]},n.model=new S(Object(p.a)(n)),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.model.init();var e=this.props,t=e.match,n=e.history;/^(all|active|completed)$/.test(t.params.filter)&&t.isExact||n.push("/todo/all")}},{key:"render",value:function(){var e,t=this,n=this.props.match;return this.state.todos.length&&(e=this.state.todos.filter(function(e){return"all"===n.params.filter||e.completed===("completed"===n.params.filter)}).map(function(e){return o.a.createElement(w,{key:e.id,todo:e,editing:e.id===t.state.editor,onEditor:t.itemEdit,onSubmit:t.itemSubmit,onToggle:t.itemToggle,onDestroy:t.itemDestroy})})),o.a.createElement("main",{className:"main"},o.a.createElement("header",{className:"header"},o.a.createElement("input",{className:"new-todo",placeholder:"What needs to be done?",value:this.state.newTodo,onKeyDown:this.handleNewTodoKeyDown,onChange:this.handleChange,autoFocus:!0})),e,o.a.createElement("footer",{className:"footer"},o.a.createElement("ul",{className:"filters"},o.a.createElement("li",{className:E()({selected:"all"===n.params.filter})},o.a.createElement(b.a,{to:"./all"},"All")),o.a.createElement("li",{className:E()({selected:"active"===n.params.filter})},o.a.createElement(b.a,{to:"./active"},"Active")),o.a.createElement("li",{className:E()({selected:"completed"===n.params.filter})},o.a.createElement(b.a,{to:"./completed"},"Completed")))))}}]),t}(a.Component),_=function(e,t,n,a){return e==a?t+n:n*(1-Math.pow(2,-10*e/a))+t},M=(n(41),function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).animation=void 0,n.state={translate:-100*e.i},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=e.i,a=t.translate;n!==this.props.i&&(cancelAnimationFrame(this.animation),this.swiper(a,0))}},{key:"swiper",value:function(e,t){var n=this,a=(this.state.translate,this.props),o=a.i,i=a.time,r=t+1,c=-100*o,s=_(r,e,c-e,i);this.setState({translate:s},function(){c!==n.state.translate&&(n.animation=requestAnimationFrame(function(){return n.swiper(e,r)}))})}},{key:"renderSwiper",value:function(e,t){var n=this.state.translate+100*t;if(n>-100&&n<100)return o.a.createElement("div",{key:t,style:{transform:"translateY(".concat(n,"%)")}},e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=(t.style,t.className),i=(Array.isArray(n)?n:[n]).map(function(t,n){return e.renderSwiper(t,n)});return o.a.createElement("section",Object.assign({},this.props,{className:"wrapper ".concat(a||"").trim()}),i)}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.animation)}}]),t}(a.Component));M.defaultProps={i:0,time:200};var C=M,T=(n(42),function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).interval=void 0,n.state={index:1},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.interval=this.swiper()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"swiper",value:function(){var e=this;return setInterval(function(){e.setState(function(e){var t=e.index;return{index:++t<=2?t:0}})},1e3)}},{key:"render",value:function(){var e=this.state.index;return o.a.createElement(C,{ref:"carousel",className:"carousel",i:e},o.a.createElement("div",{className:"carousel_item red"}),o.a.createElement("div",{className:"carousel_item black"}),o.a.createElement("div",{className:"carousel_item green"}))}}]),t}(a.Component)),I=n(17);n(43);function D(e){var t=e.activeIndex,n=e.index,i=e.length,r=e.width,c=Object(a.useState)(0),s=Object(I.a)(c,2),l=s[0],u=s[1],d=Object(a.useState)(!1),m=Object(I.a)(d,2),f=m[0],h=m[1],v=function(e){var t=Object(a.useRef)();return Object(a.useEffect)(function(){t.current=e}),t.current}(t);return Object(a.useEffect)(function(){!function(e,t,n){var a=r;void 0!==n&&(e===t||e===n?h(!0):t!==n||this.translate===a&&this.translate===-a?h(!1):h(!0));e!==t&&i>2&&(e=function(e,t,n){if(0===t&&e===n-1)return-1;if(t===n-1&&0===e)return n;if(e<t-1&&t-e>=n/2)return n+1;if(e>t+1&&e-t>=n/2)return-2;return e}(e,t,i));u(a*(e-t))}(n,t,v)},[e.activeIndex]),o.a.createElement("div",{className:"carousel-item ".concat(f?"animating":""),style:{transform:"translateX(".concat(l,"px)")}},e.children)}var W=function(e){var t=Object(a.useState)(0),n=Object(I.a)(t,2),i=n[0],r=n[1],c=e.children,s=Object(a.useRef)(),l=(s.current||0).offsetWidth;Object(a.useEffect)(function(){var e=i+1;e=e>=c.length?0:e;var t=setTimeout(function(){r(e)},1e3);return function(){return clearTimeout(t)}});var u=c.map(function(e,t){return o.a.createElement(D,{key:t,index:t,width:l,length:c.length,activeIndex:i},[e])});return o.a.createElement("section",Object.assign({},e,{ref:s}),u)},A=(n(44),function(){return o.a.createElement(W,{className:"carousel"},o.a.createElement("div",{className:"carousel_item red"}),o.a.createElement("div",{className:"carousel_item black"}),o.a.createElement("div",{className:"carousel_item green"}))}),F=n(18);function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(t){setTimeout(t,e)})}n(45);var H=n(27),P=(n(53),function(e){var t,n,a=e.options,i=e.send;return a?(a instanceof Array?(n="qustion",t=a.map(function(e,t){return o.a.createElement("div",{className:"__select_item",key:t,onClick:function(){return i(e)}},e.dialog)})):(n="brief",t=Object.keys(a).map(function(e,t){return o.a.createElement("div",{className:"__select_item",key:t,onClick:function(){return i(a[e])}},a[e].brief)})),o.a.createElement("div",{className:["__select",n].join(" ")},t)):null}),q=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).handleClick=function(){n.setState(function(e){return{show:!e.show}})},n.handleSend=function(e){n.setState({show:!1}),n.props.sendMessage(e)},n.state={show:!1},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.dialog,a=this.state.show;return o.a.createElement("div",{className:"select-input"},o.a.createElement(H.CSSTransition,{in:a,timeout:300,classNames:"select",unmountOnExit:!0},o.a.createElement(P,{options:n,send:this.handleSend})),o.a.createElement("div",{className:"__input",onClick:this.handleClick},t))}}]),t}(a.Component),L=(n(54),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.left,n=e.children,a="img"===n.type?o.a.createElement("img",{src:n.src,alt:"\u804a\u5929"}):n;return o.a.createElement("div",{className:["bubble",t?"left":"right"].join(" ")},o.a.createElement("span",null,a))}}]),t}(a.Component)),R={answer:{"0000":{dialog:[["\u4f60\u597d",{type:"img",src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1536570116809&di=57b843c27e015e1c770df362c109069d&imgtype=0&src=http%3A%2F%2Fimg.mp.sohu.com%2Fupload%2F20170809%2F796191908b6c453198c7035a0c3901aa_th.png"}]],response:[{dialog:[["\u4f60\u597d"]],next:"0001"}]},"0001":{dialog:[["\u541b\u4e0d\u89c1\uff0c\u9ec4\u6cb3\u4e4b\u6c34\u5929\u4e0a\u6765\uff0c\u5954\u6d41\u5230\u6d77\u4e0d\u590d\u56de\u3002\n          \u541b\u4e0d\u89c1\uff0c\u9ad8\u5802\u660e\u955c\u60b2\u767d\u53d1\uff0c\u671d\u5982\u9752\u4e1d\u66ae\u6210\u96ea\u3002\n          \u4eba\u751f\u5f97\u610f\u987b\u5c3d\u6b22\uff0c\u83ab\u4f7f\u91d1\u6a3d\u7a7a\u5bf9\u6708\u3002\n          \u5929\u751f\u6211\u6750\u5fc5\u6709\u7528\uff0c\u5343\u91d1\u6563\u5c3d\u8fd8\u590d\u6765\u3002\n          \u70f9\u7f8a\u5bb0\u725b\u4e14\u4e3a\u4e50\uff0c\u4f1a\u987b\u4e00\u996e\u4e09\u767e\u676f\u3002\n          \u5c91\u592b\u5b50\uff0c\u4e39\u4e18\u751f\uff0c\u5c06\u8fdb\u9152\uff0c\u676f\u83ab\u505c\u3002\n          \u4e0e\u541b\u6b4c\u4e00\u66f2\uff0c\u8bf7\u541b\u4e3a\u6211\u503e\u8033\u542c\u3002\n          \u949f\u9f13\u9994\u7389\u4e0d\u8db3\u8d35\uff0c\u4f46\u613f\u957f\u9189\u4e0d\u590d\u9192\u3002\n          \u53e4\u6765\u5723\u8d24\u7686\u5bc2\u5bde\uff0c\u60df\u6709\u996e\u8005\u7559\u5176\u540d\u3002\n          \u9648\u738b\u6614\u65f6\u5bb4\u5e73\u4e50\uff0c\u6597\u9152\u5341\u5343\u6063\u6b22\u8c11\u3002\n          \u4e3b\u4eba\u4f55\u4e3a\u8a00\u5c11\u94b1\uff0c\u5f84\u987b\u6cbd\u53d6\u5bf9\u541b\u914c\u3002\n          \u4e94\u82b1\u9a6c\uff0c\u5343\u91d1\u88d8\uff0c\u547c\u513f\u5c06\u51fa\u6362\u7f8e\u9152\uff0c\u4e0e\u5c14\u540c\u9500\u4e07\u53e4\u6101\u3002"]]}},qusition:{work:{brief:"\u5de5\u4f5c",dialog:[["\u4f60\u597d","\u4f60\u5de5\u4f5c\u600e\u4e48\u6837"]],next:"0000"}}},$=function(){return[o.a.createElement("div",{className:"dot",key:1}),o.a.createElement("div",{className:"dot",key:2}),o.a.createElement("div",{className:"dot",key:3})]},K=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(h.a)(this,Object(v.a)(t).call(this,e))).meMessage=function(e){var t=R.answer[e];return n.sendMessage(t,!0).then(function(){var e=R.qusition;return t.response&&(e=t.response),n._setState({options:e})})},n.sendMessage=function(e,t){var a=e.dialog,o=e.next,i=a[Math.floor(Math.random()*a.length)],r=n.chatChain.then(function(){return n._setState({options:null})});return i instanceof Array?i.forEach(function(e){r=r.then(function(){return n.pushMessage(e,t)})}):r=r.then(function(){return n.pushMessage(i,t)}),r.then(function(){if(o)return n.meMessage(o)}),r},n.pushMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(e,a){return n._setState(function(e){return{dialog:[].concat(Object(F.a)(e.dialog),[{content:o.a.createElement($,null),answer:t}])}}).then(n.updateScroll).then(function(){return a?50:"img"===e.type?function(e){if("string"===typeof e){var t=document.createElement("img");return t.src=e,new Promise(function(e){return t.onload=function(){return e(t)}})}return Promise.resolve()}(e.src):J(e.length>5?Math.min(100*e.length,2e3):0)}).then(function(){return function e(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n._setState(function(e){var n=Object(F.a)(e.dialog);return n[n.length-1]="img"===a.type?{content:a,answer:t}:{content:a.slice(0,o),answer:t},{dialog:n}}).then(n.updateScroll).then(function(){return J(80*Math.random()+70)}).then(function(){return o===a.length||"img"===a.type?J(100*Math.random()+100):e(a,++o)})}(e)})},i=Promise.resolve();return"string"===typeof e?e.split("\n").forEach(function(e,t){i=i.then(function(){return a(e.trim(),0!==t)})}):i.then(function(){return a(e)}),i},n._setState=function(e){return new Promise(function(t){n.setState(e,t)})},n.updateScroll=function(){var e=n.$box.current,t=e.scrollHeight,a=e.scrollTop,o=t-e.clientHeight-a,i=Date.now();requestAnimationFrame(function t(){var n=Math.min(1,(Date.now()-i)/250);e.scrollTop=a+o*n,n<1&&requestAnimationFrame(t)})},n.state={inputing:!1,dialog:[],options:[]},n.$box=o.a.createRef(),n.chatChain=Promise.resolve(),n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.meMessage("0000")}},{key:"render",value:function(){var e=this.state,t=e.dialog,n=e.options;return o.a.createElement("div",{id:"chat"},o.a.createElement("div",{className:"box",ref:this.$box},t.map(function(e,t){return e instanceof Object?o.a.createElement(L,{key:t,left:e.answer},e.content):o.a.createElement(L,{key:t},e)})),o.a.createElement(q,{dialog:n,sendMessage:this.sendMessage},n?"\u8bf4\u70b9\u4ec0\u4e48...":"\u8f93\u5165\u4e2d..."))}}]),t}(a.Component),U=function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"404"))};var B=function(){var e=Object(a.useRef)();return Object(a.useEffect)(function(){return d(e.current)},[]),o.a.createElement(c.a,null,o.a.createElement("div",null,o.a.createElement("canvas",{style:{position:"fixed",top:0,left:0},ref:e}),o.a.createElement(s.a,null,o.a.createElement(l.a,{exact:!0,path:"/todo/:filter",component:N}),o.a.createElement(l.a,{exact:!0,path:"/carousel",component:A}),o.a.createElement(l.a,{exact:!0,path:"/swiper",component:T}),o.a.createElement(l.a,{exact:!0,path:"/chat",component:K}),o.a.createElement(u.a,{from:"/todo",to:"/todo/all"}),o.a.createElement(l.a,{component:U}))))},X=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Y(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(o.a.createElement(B,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/react/build",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/react/build","/service-worker.js");X?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Y(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Y(e)})}}()}},[[29,1,2]]]);
//# sourceMappingURL=main.b3b9a0b6.chunk.js.map